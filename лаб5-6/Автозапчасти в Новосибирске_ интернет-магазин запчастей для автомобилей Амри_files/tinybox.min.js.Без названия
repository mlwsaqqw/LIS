TINY={},TINY.box=function(){var t,e,i,n,a,o=0;return{container:document,show:function(h){a={opacity:70,close:1,animate:1,fixed:1,mask:1,maskid:"",boxid:"",topsplit:2,url:0,post:0,height:0,width:0,html:0,iframe:0,container:null};for(s in h)a[s]=h[s];a.container&&(this.container=a.container,o&&o.ownerDocument.body!==this.container.body&&(o=null)),o?(t.style.display="none",clearTimeout(o.ah),n.v&&(o.removeChild(n),n.v=0)):(t=this.container.createElement("div"),t.className="tbox",o=this.container.createElement("div"),o.className="tinner",i=this.container.createElement("div"),i.className="tcontent",e=this.container.createElement("div"),e.className="tmask",n=this.container.createElement("div"),n.className="tclose",n.v=0,this.container.body.appendChild(e),this.container.body.appendChild(t),t.appendChild(o),o.appendChild(i),e.onclick=n.onclick=TINY.box.hide,window.onresize=TINY.box.resize),o.id=a.boxid,e.id=a.maskid,t.style.position=a.fixed?"fixed":"absolute",a.html&&!a.animate?(o.style.backgroundImage="none","object"==typeof a.html?i.appendChild(a.html):i.innerHTML=a.html,i.style.display="",o.style.width=a.width?a.width+"px":"auto",o.style.height=a.height?a.height+"px":"auto"):(i.style.display="none",!a.animate&&a.width&&a.height?(o.style.width=a.width+"px",o.style.height=a.height+"px"):o.style.width=o.style.height="100px"),a.mask?(this.mask(),this.alpha(e,1,a.opacity)):this.alpha(t,1,100),a.autohide?o.ah=setTimeout(TINY.box.hide,1e3*a.autohide):this.container.onkeyup=TINY.box.esc},fill:function(t,e,i,n,s,h){if(e)if(a.image){var l=new Image;l.onload=function(){s=s||l.width,h=h||l.height,TINY.box.psh(l,n,s,h)},l.src=a.image}else if(a.iframe)this.psh('<iframe src="'+a.iframe+'" width="'+a.width+'" frameborder="0" height="'+a.height+'"></iframe>',n,s,h);else{var r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");r.onreadystatechange=function(){4==r.readyState&&200==r.status&&(o.style.backgroundImage="",TINY.box.psh(r.responseText,n,s,h))},i?(r.open("POST",t,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(i)):(r.open("GET",t,!0),r.send(null))}else this.psh(t,n,s,h)},psh:function(t,e,n,a){"object"==typeof t?i.appendChild(t):i.innerHTML=t;var s=o.style.width,h=o.style.height;n&&a||(o.style.width=n?n+"px":"",o.style.height=a?a+"px":"",i.style.display="",a||(a=parseInt(i.offsetHeight)),n||(n=parseInt(i.offsetWidth)),i.style.display="none"),o.style.width=s,o.style.height=h,this.size(n,a,e)},esc:function(t){t=t||window.event,27==t.keyCode&&TINY.box.hide()},hide:function(){TINY.box.alpha(t,-1,0,3),document.onkeypress=null,a.closejs&&a.closejs()},resize:function(){TINY.box.pos(),TINY.box.mask()},mask:function(){e.style.height=this.total(1)+"px",e.style.width=this.total(0)+"px"},pos:function(){var e;void 0!==a.top?e=a.top:(e=this.height()/a.topsplit-t.offsetHeight/2,e=e<20?20:e),a.fixed||a.top||(e+=this.top()),t.style.top=e+"px",t.style.left=void 0!==a.left?a.left+"px":this.width()/2-t.offsetWidth/2+"px"},alpha:function(t,e,i){clearInterval(t.ai),e&&(t.style.opacity=0,t.style.filter="alpha(opacity=0)",t.style.display="block",TINY.box.pos()),t.ai=setInterval(function(){TINY.box.ta(t,i,e)},20)},ta:function(n,s,h){var l=Math.round(100*n.style.opacity);if(l==s)clearInterval(n.ai),-1==h?(n.style.display="none",n==t?TINY.box.alpha(e,-1,0,2):i.innerHTML=o.style.backgroundImage=""):n==e?this.alpha(t,1,100):(t.style.filter="",TINY.box.fill(a.html||a.url,a.url||a.iframe||a.image,a.post,a.animate,a.width,a.height));else{var r=s-Math.floor(.5*Math.abs(s-l))*h;n.style.opacity=r/100,n.style.filter="alpha(opacity="+r+")"}},size:function(t,e,s){if(s){clearInterval(o.si);var h=parseInt(o.style.width)>t?-1:1,l=parseInt(o.style.height)>e?-1:1;o.si=setInterval(function(){TINY.box.ts(t,h,e,l)},20)}else o.style.backgroundImage="none",a.close&&(o.appendChild(n),n.v=1),o.style.width=t+"px",o.style.height=e+"px",i.style.display="",this.pos(),a.openjs&&a.openjs()},ts:function(t,e,s,h){var l=parseInt(o.style.width),r=parseInt(o.style.height);l==t&&r==s?(clearInterval(o.si),o.style.backgroundImage="none",i.style.display="block",a.close&&(o.appendChild(n),n.v=1),a.openjs&&a.openjs()):(l!=t&&(o.style.width=t-Math.floor(.6*Math.abs(t-l))*e+"px"),r!=s&&(o.style.height=s-Math.floor(.6*Math.abs(s-r))*h+"px"),this.pos())},top:function(){return this.container.documentElement.scrollTop||this.container.body.scrollTop},width:function(){return this.container.documentElement.clientWidth||self.innerWidth||this.container.body.clientWidth},height:function(){return this.container.documentElement.clientHeight||self.innerHeight||this.container.body.clientHeight},total:function(t){var e=this.container.body,i=this.container.documentElement;return t?Math.max(Math.max(e.scrollHeight,i.scrollHeight),Math.max(e.clientHeight,i.clientHeight)):Math.max(Math.max(e.scrollWidth,i.scrollWidth),Math.max(e.clientWidth,i.clientWidth))}}}(),jqWar&&jqWar(document).ready(function(){jqWar('a[rel="tiny"]').click(function(){return w=jqWar(this).attr("data-width")?jqWar(this).attr("data-width"):800,h=jqWar(this).attr("data-height")?jqWar(this).attr("data-height"):600,open_tbox_frame(jqWar(this).attr("href"),w,h),!1})});