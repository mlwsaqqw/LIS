(self.webpackChunkwar_lib_6=self.webpackChunkwar_lib_6||[]).push([[590],{43925:function(t,e,n){"use strict";n.d(e,{P:function(){return a}});var a="dcFilter.contentLoaded"},94722:function(t,e,n){"use strict";n.d(e,{Z:function(){return l}});var a=n(59713),r=n.n(a);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){return{test:function(n){return t.ajaxCheck(n,e)}}}function l(t){return{IsEmpty:{test:function(t){return"select-one"===t.type||"select"===t.type?!(t.selectedIndex>=0&&""!==t.options[t.selectedIndex].value):"checkbox"===t.type?!t.checked:""===t.value.trim()}},confirmPassword:{test:function(t){var e=document.querySelector("[name=".concat(t.name.substr(0,t.name.indexOf("_repeat")),"]"));return!!e&&e.value===t.value}},required:{test:function(e){return!t.validators.IsEmpty.test(e)}},digitAndNot:{test:function(t){return/^(.*[a-z].*)$/i.test(t.value)&&/^(.*[0-9].*)$/i.test(t.value)}},"validate-integer":{test:function(e){return t.validators.IsEmpty.test(e)||/^(-?[1-9]\d*|0)$/.test(e.value)}},"validate-inputmask":{test:function(e){var n,a=e.iMask?null===(n=e.iMask)||void 0===n?void 0:n.masked.isComplete:jqWar(e).inputmask("isComplete");return t.validators.IsEmpty.test(e)||a}},"validate-numeric":{test:function(e){return t.validators.IsEmpty.test(e)||/^-?(?:0$0(?=\d*\.)|[1-9]|0)\d*(\.\d+)?$/.test(e.value)}},"validate-digits":{test:function(e){return e.classList.contains("masked")||t.validators.IsEmpty.test(e)||/^[\d() .:\-\+#]+$/.test(e.value)}},"validate-alpha":{test:function(e){return t.validators.IsEmpty.test(e)||/^[a-zA-Z]+$/.test(e.value)}},"validate-alphanum":{test:function(e){return t.validators.IsEmpty.test(e)||!/\W/.test(e.value)}},"validate-userlogin":{test:function(e){return t.validators.IsEmpty.test(e)||/^[a-zа-я0-9\.\-_;:\[\]\\!#$%&'*+/=?^`{|}~@]+$/i.test(e.value)}},"validate-email":{test:function(e){return t.validators.IsEmpty.test(e)||/^(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]\.?){0,63}[a-z0-9!#$%&'*+\/=?^_`{|}~-]@(?:(?:[a-zа-я0-9](?:[a-zа-я0-9-]{0,61}[a-zа-я0-9])?\.)*[a-zа-я0-9](?:[a-zа-я0-9-]{0,61}[a-zа-я0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\])\.[a-zа-я]{2,}$/i.test(e.value)}},"validate-emails":{test:function(e){return t.validators.IsEmpty.test(e)||/^((?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]\.?){0,63}[a-z0-9!#$%&'*+\/=?^_`{|}~-]@(?:(?:[a-zа-я0-9](?:[a-zа-я0-9-]{0,61}[a-zа-я0-9])?\.)*[a-zа-я0-9](?:[a-zа-я0-9-]{0,61}[a-zа-я0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\])\.[a-zа-я]{2,} *)+$/i.test(e.value)}},"validate-url":{test:function(e){return t.validators.IsEmpty.test(e)||/^(https?|ftp|rmtp|mms):\/\/(([A-Z0-9][A-Z0-9_-]*)(\.[A-Z0-9][A-Z0-9_-]*)+)(:(\d+))?\/?/i.test(e.value)}},"validate-currency-dollar":{test:function(e){return t.validators.IsEmpty.test(e)||/^\$?\-?([1-9]{1}[0-9]{0,2}(\,[0-9]{3})*(\.[0-9]{0,2})?|[1-9]{1}\d*(\.[0-9]{0,2})?|0(\.[0-9]{0,2})?|(\.[0-9]{1,2})?)$/.test(e.value)}},checkEmailDB:s({},o(t,"checkEmailDB")),checkUserDB:s({},o(t,"checkUserDB")),checkContactPhoneDB:s({},o(t,"checkContactPhoneDB")),checkContactMobilePhoneDB:s({},o(t,"checkContactMobilePhoneDB")),length:{test:function(e){var n=t.getElementProperties(e);return null===n||!n.length||(e.value.length===n.length||0===e.value.length)}},minLength:{test:function(e){var n=t.getElementProperties(e);return null===n||!n.minLength||e.value.length>=(n.minLength||0)}},maxLength:{test:function(e){var n=t.getElementProperties(e);return null===n||!n.maxLength||e.value.length<=(n.maxLength||1e4)}}}}},98967:function(t,e,n){"use strict";var a=n(87757),r=n.n(a),i=n(319),s=n.n(i),o=n(48926),l=n.n(o),c=n(59713),u=n.n(c),d=n(34575),h=n.n(d),m=n(93913),f=n.n(m),p=n(43925),v=n(94722);function b(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var E={checkOnChange:!0,failedClass:"validation-failed",successClass:"validation-passed",validationPropertyName:"data-validator-properties",matchFieldClass:"required",phoneValidateClass:"checkContactPhoneDB",phoneMobileValidateClass:"checkContactMobilePhoneDB",emailValidateClass:"checkEmailDB",customValidate:null,messages:null,humanCheckHref:"",submitMode:!0,ajaxCheckLoading:{},disabledSubmit:!1,isValidForm:!0},w=["reg_hc_code","hc_code"],C=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h()(this,t),this.formName=e,this.params=k(k({},E),n),this.controls={},this.validatedFields={},this.customValidationFields=[];var a=document.createEvent("Event");a.initEvent("formFieldFail",!0,!0),this.events={fieldFail:a}}var e,n,a,i,o,c;return f()(t,[{key:"init",value:function(){var t=this;if(this.form=document.querySelector("[name=".concat(this.formName,"]")),this.form){this.form.addEventListener("submit",this.onFormSubmit.bind(this));var e=!1;this.requiredFields.forEach((function(n){var a=n.parentNode;a.classList.contains("form-gr__control")&&a.classList.add("form-gr__control--required"),t.params.checkOnChange&&(w.includes(n.name)&&(e=!0),t.initFieldValidation(n))})),this.params.checkOnChange&&this.notRequiredFields.forEach((function(e){return t.initFieldValidation(e)}));var n=this.params.humanCheckHref;n&&e&&this.initCaptcha(n),this.validators=(0,v.Z)(this),window.EventsBus.once(p.P,(function(){var e;t.init();var n=t.controls,a=window.DropDownList||(null===(e=window.warComponents)||void 0===e?void 0:e.DropDownList);a&&Object.keys(n).forEach((function(t){n[t]instanceof a&&n[t].init()}))}))}}},{key:"onFormSubmit",value:(c=l()(r().mark((function t(e){var n,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),this.params.submitMode=!0,t.next=4,this.validate(this.form);case 4:this.isValidForm=t.sent,this.isValidForm&&!this.params.disabledSubmit&&("_self"!==this.form.target&&""!==this.form.target||s()(this.form.querySelectorAll("[type=submit], .submitButton, button")).forEach((function(t){t.disabled=!0})),null!=(n=e.submitter)&&n.name&&((a=document.createElement("input")).type="hidden",a.name=n.name,a.value=n.value,this.form.appendChild(a)),this.params.disabledSubmit||HTMLFormElement.prototype.submit.call(this.form));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"initFieldValidation",value:function(t){var e=this;t.addEventListener("change",(function(t){var n=t.target;e.params.submitMode=!1,e.changeHandler(n)}))}},{key:"initCaptcha",value:function(t){var e=s()(this.form.querySelectorAll("input, textarea")),n=s()(document.querySelectorAll("img.HumanCheck")),a=function(){n.forEach((function(e){e.getAttribute("src")||(e.setAttribute("src",t),function(t,e){var n=document.createElement("div"),a=document.createElement("button"),r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"use");a.type="button",a.classList.add("refresh-captcha__button"),n.classList.add("refresh-captcha"),t.classList.add("refresh-captcha__img"),t.parentNode.appendChild(n),n.appendChild(t),n.appendChild(a),i.appendChild(s),a.appendChild(i),i.classList.add("refresh-captcha__svg"),s.setAttribute("href","/_sysimg/svg/ui-kit.svg#refresh"),a.addEventListener("click",(function(n){n.preventDefault(),t.src="".concat(e,"?").concat(Date.now())}))}(e,t))}))};e.forEach((function(t){t.addEventListener("focus",a)}))}},{key:"validate",value:(o=l()(r().mark((function t(e){var n,a,i,s,o,c=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,a=!0,t.next=4,Promise.all(this.validationFields.map(function(){var t=l()(r().mark((function t(e){var i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.validateField(e);case 2:if((i=t.sent).validated){t.next=5;break}return t.abrupt("return");case 5:i.fail?(a=!1,c.onElementFail(e,i.msg),n||(n=e)):c.onElementPass(e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:return i=this.params.customValidate,a&&"function"==typeof i&&!1===i(e)&&(a=!1),n&&(s=n.closest(".collapsible-block"),"false"===(null==(o=null==s?void 0:s.querySelector(".collapsible-block__toggle"))?void 0:o.getAttribute("aria-expanded"))&&(o.click(),this.validate(s)),n.focus({preventScroll:!1}),n.scrollIntoView({block:"center"})),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"validateField",value:(i=l()(r().mark((function t(e){var n,a,i,o,l,c,u,d,h,m,f,p=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.name||e.dataset.name,!this.controls[n]||!this.controls[n].validate){t.next=5;break}return a=this.controls[n].validate(),i=a.message,o=a.result,l=!e.classList.contains("required")&&!e.value,t.abrupt("return",{msg:i,fail:!o,validated:!l});case 5:if(c={msg:!1,fail:!1,validated:!1},this.requiredFields.includes(e)||!this.validators.IsEmpty.test(e)){t.next=8;break}return t.abrupt("return",c);case 8:u=s()(e.classList).filter((function(t){return p.validators[t]})),d=b(u),t.prev=10,d.s();case 12:if((h=d.n()).done){t.next=24;break}return m=h.value,t.next=16,this.validators[m].test(e);case 16:if(f=t.sent,c.validated=!0,f){t.next=22;break}return c.msg=this.params.messages[m],c.fail=!0,t.abrupt("break",24);case 22:t.next=12;break;case 24:t.next=29;break;case 26:t.prev=26,t.t0=t.catch(10),d.e(t.t0);case 29:return t.prev=29,d.f(),t.finish(29);case 32:return t.abrupt("return",c);case 33:case"end":return t.stop()}}),t,this,[[10,26,29,32]])}))),function(t){return i.apply(this,arguments)})},{key:"getElementProperties",value:function(t){var e=t.getAttribute(this.params.validationPropertyName);return e?JSON.parse(e):null}},{key:"onElementPass",value:function(t){t.classList.remove(this.params.failedClass),t.classList.add(this.params.successClass),this.controls[t.name]&&this.controls[t.name].onElementSuccess&&this.controls[t.name].onElementSuccess()}},{key:"onElementFail",value:function(t){this.params.ajaxCheckLoading[t.name]||(t.classList.add(this.params.failedClass),t.classList.remove(this.params.successClass),t.dispatchEvent(this.events.fieldFail),this.controls[t.name]&&this.controls[t.name].onElementFail&&this.controls[t.name].onElementFail())}},{key:"onElementReset",value:function(t){t.classList.contains(this.params.failedClass)&&t.classList.remove(this.params.failedClass),t.classList.contains(this.params.successClass)&&t.classList.remove(this.params.successClass)}},{key:"ajaxCheck",value:(a=l()(r().mark((function t(e,n){var a,i,s,o=arguments;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=o.length>2&&void 0!==o[2]?o[2]:"/_ajax/customer/validation/",!this.params.submitMode||!this.validatedFields[n]){t.next=3;break}return t.abrupt("return",!0);case 3:return this.params.ajaxCheckLoading[e.name]=!0,this.validatedFields[n]=!1,i="".concat(a,"?type=").concat(encodeURIComponent(n),"&value=").concat(encodeURIComponent(e.value)),t.prev=6,t.next=9,fetch(i);case 9:return s=t.sent,t.next=12,s.json();case 12:if(!t.sent.find){t.next=17;break}this.onElementFail(e,this.params.messages[n]),t.next=20;break;case 17:return this.validatedFields[n]=!0,this.onElementPass(e),t.abrupt("return",!0);case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(6),console.error(t.t0);case 25:return t.prev=25,this.params.ajaxCheckLoading[e.name]=!1,t.finish(25);case 28:return t.abrupt("return",!1);case 29:case"end":return t.stop()}}),t,this,[[6,22,25,28]])}))),function(t,e){return a.apply(this,arguments)})},{key:"addControl",value:function(t,e){var n=this;e.formName=this.formName,this.controls[t]=e,e.onChange&&e.required&&e.onChange((function(t){return n.changeHandler(t)}))}},{key:"addValidator",value:function(t){var e=t.name,n=t.validator,a=t.message,r=t.fieldSelector,i=t.fieldNode||this.form.querySelector(r);i&&"function"==typeof n.test&&(this.params.messages[e]=a,this.validators[e]||(this.validators[e]=n),i.classList.contains(e)||i.classList.add(e),this.customValidationFields.includes(i)||(this.customValidationFields.push(i),this.params.checkOnChange&&this.initFieldValidation(i)))}},{key:"submit",value:(n=l()(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.validate(this.form);case 2:t.sent&&this.form.submit();case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"requiredFields",get:function(){return s()(this.form.querySelectorAll(".".concat(this.params.matchFieldClass)))}},{key:"phoneFields",get:function(){return s()(this.form.querySelectorAll("\n    .".concat(this.params.phoneMobileValidateClass,", .").concat(this.params.phoneValidateClass,"\n    ")))}},{key:"notRequiredFields",get:function(){return[].concat(s()(this.phoneFields),s()(this.form.querySelectorAll("\n      .".concat(this.params.emailValidateClass,":not(.required)"))))}},{key:"visibleFields",get:function(){return this.requiredFields.filter((function(t){if("checkbox"===t.type){var e=t.nextElementSibling;if(e&&"LABEL"===e.tagName&&0===e.offsetWidth)return!1}else if(0===t.offsetWidth&&!t.closest(".collapsible-block")||t.closest(".hide, [hidden]"))return!1;return!0}))}},{key:"initialValidationFields",get:function(){return this.visibleFields.filter((function(e){return t.isFieldForValidation(e)}))}},{key:"validationFields",get:function(){return[].concat(s()(this.initialValidationFields),s()(this.notRequiredFields),s()(this.customValidationFields))}},{key:"changeHandler",value:(e=l()(r().mark((function t(e){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.validateField(e);case 2:(n=t.sent).fail?this.onElementFail(e,n.msg):this.onElementPass(e),n.validated||this.onElementReset(e);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}],[{key:"isFieldForValidation",value:function(t){var e=t.nodeName;return"INPUT"===e||"SELECT"===e||"TEXTAREA"===e}}]),t}();window.warModules=k(k({},window.warModules),{},{WarForm:C})}},0,[[98967,97,1932]]]);