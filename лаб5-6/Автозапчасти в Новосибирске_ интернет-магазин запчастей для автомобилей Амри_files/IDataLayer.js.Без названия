(self.webpackChunkwar_lib_6=self.webpackChunkwar_lib_6||[]).push([[9171],{67424:function(t,e,n){"use strict";n.d(e,{D7:function(){return r},Dq:function(){return i},$Y:function(){return o}});var r="add",i="remove",o="detail"},29973:function(t,e,n){"use strict";n.d(e,{Ve:function(){return r},w7:function(){return i},TR:function(){return o},Gs:function(){return s}});var r="basket.change",i="basket.changed",o="basket.add",s="basket.delete"},3026:function(t,e,n){"use strict";var r=n(87757),i=n.n(r),o=n(48926),s=n.n(o),a=n(59713),u=n.n(a),c=n(34575),p=n.n(c),h=n(93913),f=n.n(h),d=n(29973),l=n(67424),y=function(){function t(){p()(this,t),this.item={},window.EventsBus.on(d.w7,this.changedHandler.bind(this))}return f()(t,[{key:"changedHandler",value:function(t){var e=t.amountsCount,n=t.previousAmountsCount,r=e>n?l.D7:l.Dq,i=Math.abs(e-n);this.item.quantity=i,this.resolveFn&&this.resolveFn({actionType:r,product:this.item})}},{key:"set",value:function(t){this.item=t}},{key:"get",value:function(){var t=this;return new Promise((function(e){t.resolveFn=e}))}}]),t}();function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var w={name:"dataLayer"},m=function(){function t(e){p()(this,t),this.options=b(b({},w),e),window[this.options.name]=[],this.lastBasketItem=new y}var e;return f()(t,[{key:"push",value:function(t){var e=t.actionType,n=t.actionField,r=void 0===n?null:n,i=t.products;window[this.options.name].push({ecommerce:null});var o={products:i};r&&(o.actionField=r),window[this.options.name].push({ecommerce:u()({},e,o)})}},{key:"pushBasketAction",value:(e=s()(i().mark((function t(e){var n,r,o,s,a,u,c,p,h;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.lastBasketItem.set(e),t.next=3,this.lastBasketItem.get();case 3:n=t.sent,r=n.actionType,o=n.product,s=o.id,a=o.name,u=o.brand,c=o.price,p=o.quantity,h=o.category,this.push({actionType:r,products:[{id:s,name:a,brand:u,price:c,quantity:p,category:h}]});case 8:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}();window.IDataLayer=m}},0,[[3026,97,1932]]]);